<div id="disaster-list-container">
    <app-loading [loading]="isLoading()"></app-loading>
    @if (floodEventResults().length > 0) {
    <div class="content-container">
        <div class="disaster-list-content">
            <p-table [value]="floodEventResults()" [paginator]="true" [rows]="25" showGridlines stripedRows>
                <ng-template pTemplate="header">
                    <tr>
                        <th>Area</th>
                        <th>Event</th>
                        <th>Certainty</th>
                        <th>Severity</th>
                        <th>Urgency</th>
                        <th>Effective</th>
                        <th>Expires</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-warning>
                    <tr>
                        <td>
                            <ul>
                                @for (area of warning.areaDesc; track area) {
                                <li>
                                    <a [routerLink]="['/details', warning.id]">{{area}}</a>
                                </li>
                                }
                            </ul>
                        </td>
                        <td>{{ warning.event }}</td>
                        <td>{{ warning.certainty }}</td>
                        <td>{{ warning.severity }}</td>
                        <td>{{ warning.urgency }}</td>
                        <td>{{ warning.effective | date:'short' }}</td>
                        <td>{{ warning.expires | date:'short' }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>

        <div class="disaster-list-content">
            <app-event-map [mapId]="'disaster-list'" [floodEvents]="floodEventResults()!" [userLat]="userLocation().lat"
                [userLong]="userLocation().long"></app-event-map>
        </div>
    </div>
    }
</div>